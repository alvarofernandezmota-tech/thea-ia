# =======================================================
# THEA IA 3.0 — ENVIRONMENT CONFIGURATION, ENTERPRISE
# =======================================================

# ---- GENERAL APP/ENVIRONMENT ----
APP_NAME=Thea IA
APP_VERSION=3.0.0
ENVIRONMENT=production  # development, staging, production
DEBUG=false
LOG_LEVEL=INFO
LOG_FORMAT=json

# ---- API & WEB SERVER ----
API_HOST=0.0.0.0
API_PORT=8000
API_PREFIX=/api/v1
API_TIMEOUT_SECONDS=30
SECRET_KEY=change_this_in_production_please_32chars_min
JWT_ALGORITHM=HS256
JWT_EXPIRE_HOURS=24
JWT_REFRESH_EXPIRE_DAYS=7

# ---- DATABASE CONFIGURATION ----
DATABASE_TYPE=postgresql  # postgresql, sqlite, mysql
DATABASE_URL=postgresql+asyncpg://thea_user:thea_password@db.theaia.internal:5432/theaia_db
DATABASE_POOL_SIZE=10
DATABASE_POOL_OVERFLOW=20
DATABASE_TIMEOUT=30
DATABASE_ECHO=false

SQLITE_URL=sqlite+aiosqlite:///./data/theaia.db
SQLITE_CHECK_SAME_THREAD=false  # only needed for aiosqlite

# ---- CACHE & MESSAGE QUEUES ----
CACHE_ENABLED=true
CACHE_BACKEND=redis
CACHE_TTL_SECONDS=3600
REDIS_HOST=redis.theaia.internal
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URI=redis://redis.theaia.internal:6379/0
REDIS_POOL_SIZE=10
CELERY_ENABLED=false
CELERY_BROKER_URL=redis://redis.theaia.internal:6379/1
CELERY_RESULT_BACKEND=redis://redis.theaia.internal:6379/2

# ---- FSM & SESSION MANAGER ----
THEA_CORE_ENABLED=true
THEA_ROUTER_CLASS=TheaRouter
THEA_SESSION_MANAGER_ENABLED=true
FSM_ENABLED=true
FSM_TIMEOUT_SECONDS=300
FSM_LOG_TRANSITIONS=true
CONTEXT_MANAGER_CLASS=SessionManager
CONTEXT_PERSISTENCE_TYPE=database # database or redis
CONTEXT_TTL_SECONDS=86400

# ---- AGENTS & ADAPTERS ----
AGENTS_ENABLED=true
ENABLED_ADAPTERS=telegram,rest
AGENT_AGENDA_ENABLED=true
AGENT_NOTE_ENABLED=true
AGENT_EVENT_ENABLED=true
AGENT_QUERY_ENABLED=true
AGENT_REMINDER_ENABLED=true
AGENT_SCHEDULER_ENABLED=true
AGENT_HELP_ENABLED=true
AGENT_FALLBACK_ENABLED=true
AGENT_TIMEOUT_SECONDS=60

# Telegram Example
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_WEBHOOK_URL=https://api.theaia.com/webhook/telegram
TELEGRAM_WEBHOOK_SECRET=replace_with_webhook_secret
TELEGRAM_POLLING=false
TELEGRAM_TIMEOUT_SECONDS=30

# WhatsApp Example
WHATSAPP_ADAPTER_ENABLED=false
WHATSAPP_API_KEY=your_whatsapp_api_key_here
WHATSAPP_PHONE_NUMBER=+1234567890
WHATSAPP_WEBHOOK_URL=https://api.theaia.com/webhook/whatsapp

# REST API
REST_API_ENABLED=true
REST_API_VERSION=v1

# ---- MACHINE LEARNING ----
ML_ENABLED=true
INTENT_DETECTOR_CLASS=IntentDetector
INTENT_DETECTOR_MODEL=default
INTENT_CONFIDENCE_THRESHOLD=0.82
INTENT_MODEL_PATH=./models/intent_classifier_v3.pkl
ENTITY_EXTRACTOR_ENABLED=true
ENTITY_CONFIDENCE_THRESHOLD=0.75
ENTITY_MODEL_PATH=./models/entity_extractor_v3.pkl
SPACY_MODEL=es_core_news_md
ML_BATCH_SIZE=32
ML_CACHE_ENABLED=true

# ---- LOGGING, AUDIT & MONITORING ----
LOG_FILE_PATH=./logs/theaia.log
LOG_MAX_SIZE_MB=20
LOG_BACKUP_COUNT=7
LOG_JSON_FORMAT=true
AUDIT_ENABLED=true
AUDIT_LOG_PATH=./logs/audit.log
AUDIT_RETENTION_DAYS=90
AUDIT_INCLUDE_PAYLOAD=false
METRICS_ENABLED=true
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090
PROMETHEUS_ENDPOINT=/metrics
HEALTHCHECK_ENDPOINT=/health
HEALTH_CHECK_INTERVAL=30
SENTRY_ENABLED=false
SENTRY_DSN=your_sentry_dsn_here

GRAFANA_ENABLED=false
GRAFANA_DASHBOARD_URL=https://grafana.theaia.com
PROMETHEUS_TARGET_URL=http://prometheus.theaia.internal:9090
LOKI_LOG_SERVER=http://loki.theaia.internal:3100
ENABLE_ALERTS=false

# ---- SECURITY & CORS ----
CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=https://app.theaia.com,https://admin.theaia.com
ALLOWED_HOSTS=localhost,127.0.0.1,app.theaia.com
CSRF_PROTECTION=true
CSRF_TRUSTED_ORIGINS=https://app.theaia.com
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_HOUR=1000

ENCRYPTION_ENABLED=true
ENCRYPTION_ALGORITHM=AES-256
ENCRYPTION_KEY=your_encryption_key_here_32_chars_minimum
SECRET_BACKUP_KEY=your_backup_encryption_key_here

# ---- MULTI-TENANT / RBAC ----
MULTI_TENANT_ENABLED=false
ROLE_BASED_ACCESS_ENABLED=true
DEFAULT_ROLE=user
SUPER_ADMIN_EMAIL=admin@theaia.com

# ---- BACKUP & AUDIT ----
BACKUP_ENABLED=true
BACKUP_PATH=/var/backups/theaia/
BACKUP_CRON=0 2 * * * # 2am daily
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION_ENABLED=true

# ---- CI/CD & DEPLOY ----
DEPLOYMENT_ENVIRONMENT=production
DOCKER_ENABLED=true
DOCKER_REGISTRY=registry.theaia.com
IMAGE_NAME=thea-ia
IMAGE_TAG=latest
DOCKERFILE_PATH=./Dockerfile
DOCKER_BUILD_ARGS=--build-arg BUILDKIT_INLINE_CACHE=1
K8S_ENABLED=false
K8S_NAMESPACE=theaia
K8S_CONFIG_PATH=/root/.kube/config

# ---- EMAIL & NOTIFICATIONS ----
SMTP_ENABLED=true
SMTP_SERVER=smtp.theaia.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USER=notifications@theaia.com
SMTP_PASSWORD=secure_password_here
SYSTEM_EMAIL=system@theaia.com
ADMIN_EMAIL=admin@theaia.com
NOTIFICATION_EMAIL_ENABLED=true

# ---- TESTING & COVERAGE ----
TESTING_MODE=false
TEST_DATABASE_URL=sqlite:///./test.db
TEST_DATABASE_ECHO=false
COVERAGE_ENABLED=false
PYTEST_CACHING=true

# ---- FEATURE FLAGS & EXPERIMENTAL ----
FEATURE_FLAGS=feat_new_agents,feat_advanced_fsm,feat_multi_tenant_ready
CUSTOM_CONFIG_PATH=./config/custom.yaml
EXPERIMENTAL_FEATURES_ENABLED=false

# ---- INTERNAL / COMPATIBILITY ----
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1
ENVIRONMENT_FILE_VERSION=3.0
LAST_UPDATED=2025-11-03
MAINTAINER=Alvaro_Fernandez_Mota_CEO

# ---- IMPORTANT SECURITY & AUDIT NOTES ----
# 1. NUNCA subas .env al repositorio (protegido en .gitignore)
# 2. Cambia TODOS los valores de ejemplo antes de desplegar en producción
# 3. Usa Secrets Manager/Card Vault para los secretos críticos en producción
# 4. Actualiza esta plantilla con cada nuevo módulo/hito o integración relevante
# 5. Revisa logs de acceso/errores para auditoría activa
